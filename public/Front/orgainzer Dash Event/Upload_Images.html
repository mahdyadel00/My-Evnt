<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Boxicons -->
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

  <!-- My CSS -->
  <link rel="stylesheet" href="../EventDash/css/bootstrap.min.css">
  <link rel="stylesheet" href="../EventDash/css/dashboard.css">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@3.0.1/dist/css/multi-select-tag.css">

  <title> View Events Details </title>
</head>

<body>
  <!-- SIDEBAR -->
  <section id="sidebar">
    <a href="createEventstep1.html" class="brand">
      <i class='bx bxs-smile'></i>
      <span class="text">Event</span>
    </a>
    <ul class="side-menu top">
      <li>
        <a href="createEventstep1.html">
          <i class='bx bxs-plus-circle'></i>
          <span class="text">Create New Event</span>
        </a>
      </li>
      <li class="active">
        <a href="MyEvents.html">
          <i class='bx bxs-wallet-alt'></i>
          <span class="text">My Events</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class='bx bx-qr-scan'></i>
          <span class="text">Ticket Scanner App</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class='bx bxs-envelope'></i>
          <span class="text">Statistics</span>
        </a>
      </li>
      <li>
        <a href="profileOrgainzer.html">
          <i class='bx bxs-user'></i>
          <span class="text">Profile</span>
        </a>
      </li>
      <li>
        <a href="ArchivedEvents.html">
          <i class='bx bxs-archive'></i>
          <span class="text">Archived Events</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class='bx bxs-chat'></i>
          <span class="text">Support</span>
        </a>
      </li>

    </ul>
    <ul class="side-menu logout">
      <li>
        <a href="#" class="logout">
          <i class='bx bx-log-out-circle'></i>
          <span class="text">Logout</span>
        </a>
      </li>
    </ul>
  </section>
  <!-- SIDEBAR -->

  <!-- CONTENT -->
  <section id="content">
    <!-- NAVBAR -->
    <nav class="navbar">
      <i class='bx bx-menu'></i>
      <a href="#" class="profile">
        <img src="../EventDash/img/people.png">
      </a>
    </nav>
    <!-- NAVBAR -->
    <main class="container hr-section">
      <!-- start breadcrumb -->
      <div class="head-title">
        <div class="left">
          <ul class="breadcrumb">
            <li>
              <a class="active" href="#">Home</a>
            </li>
            <li><i class='bx bx-chevron-right'></i></li>
            <li>
              <a class="active" href="#">Event Details</a>
            </li>
            <li><i class='bx bx-chevron-right'></i></li>
            <li>
              <a href="#">Upload Images </a>
            </li>
          </ul>
          <h1>Upload Images </h1>
        </div>
      </div>
      <!-- end breadcrumb -->
      <div class="row">
        <div class="col-12 col-md-8 col-lg-8">
          <div class="col-md-12">
            <!-- upload cv -->
            <section class="module-section">
              <div class="upload-cv mt-2 mb-2">
                <div class="upload">
                  <div class="wrapper-file">
                    <div class="form">
                      <input type="file" class="file-input" hidden multiple>
                      <i class="fa-solid fa-images"></i>
                      <p>Browse Files to Upload</p>
                    </div>
                    <small>Upload Image event </small>
                    <section class="progress-area"></section>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
        <div class="col-12 col-md-4 col-lg-4 p-3">
          <div class="team-members">
            <small class="mb-4">Tips</small>
            <br>
            <small>Use common job titles for searchability
              Advertise for just one job eg: 'Nurse', not 'nurses'
              No general opportunities or events</small>
          </div>
        </div>
      </div>
    </main>
  </section>
  <!-- CONTENT -->

  <script src="https://unpkg.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@3.0.1/dist/js/multi-select-tag.js"></script>
  <script src="../EventDash/js/script.js"></script>
  <script>
    const form = document.querySelector(".form");
    const fileInput = document.querySelector(".file-input");
    const progressArea = document.querySelector(".progress-area");

    // Load existing files from local storage
    let uploadedFiles = JSON.parse(localStorage.getItem("uploadedFiles")) || [];

    // Function to save files to local storage
    function saveFilesToLocalStorage() {
      localStorage.setItem("uploadedFiles", JSON.stringify(uploadedFiles));
    }

    // Function to display uploaded files
    function displayUploadedFiles() {
      progressArea.innerHTML = "";
      uploadedFiles.forEach((file, index) => {
        const progressHTML = `
      <li class="row-progress" data-index="${index}">
        <i class="fa-solid fa-image" style="color: #6a7381;"></i>
        <div class="progress-content">
          <div class="details">
            <span class="name" style="color: #6a7381;">${file.name} Uploaded</span>
            <span><div class="percent" style="color: #6a7381;">${file.size}</div></span>
          </div>
          <div class="progress-bar">
            <div class="progress-part" style="width: 100%;"></div>
          </div>
          <div class="actions">
            <a href="#" class="delete-image">
              <i class="fas fa-trash-alt delete"></i>
            </a>
          </div>
        </div>
      </li>
    `;
        progressArea.innerHTML += progressHTML;
      });
    }

    // Display existing files on page load
    displayUploadedFiles();

    form.addEventListener("click", () => {
      fileInput.click();
    });

    fileInput.addEventListener("change", (event) => {
      const files = event.target.files;

      Array.from(files).forEach((file) => {
        const fileName = file.name;
        const fileSize = (file.size / 1024).toFixed(1) + " kB";

        // Add file to uploadedFiles array
        uploadedFiles.push({ name: fileName, size: fileSize });

        // Save to local storage
        saveFilesToLocalStorage();

        // Display updated list of files
        displayUploadedFiles();

        // Simulate upload progress
        const progressParts = document.querySelectorAll(".progress-part");
        const nameSpans = document.querySelectorAll(".name");
        let width = 0;
        const progressInterval = setInterval(() => {
          width += 10;
          const currentProgressPart = progressParts[progressParts.length - 1];
          const currentNameSpan = nameSpans[nameSpans.length - 1];
          currentProgressPart.style.width = width + "%";
          if (width >= 100) {
            clearInterval(progressInterval);
            currentNameSpan.textContent = `${fileName} Uploaded`;
          }
        }, 500);
      });
    });

    // Event delegation for view and delete buttons
    progressArea.addEventListener("click", (event) => {
      if (event.target.classList.contains("view-btn")) {
        const index = event.target.closest(".row-progress").dataset.index;
        alert(`Viewing file: ${uploadedFiles[index].name}`);
        // Implement your view functionality here
      } else if (event.target.classList.contains("delete")) {
        const index = event.target.closest(".row-progress").dataset.index;
        uploadedFiles.splice(index, 1);
        saveFilesToLocalStorage();
        displayUploadedFiles();
      }
    });

  </script>

</body>

</html>